<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="User">
	<resultMap type="User" id="user">
		<id property="userId" column="user_id"/>
		<result property="mIdx" column="m_idx"/>
		<result property="password" column="password"/>
		<result property="name" column="name"/>
		<result property="email" column="email"/>
		<result property="phone" column="phone"/>
		<result property="type" column="type"/>
		<result property="regdate" column="regdate"/>
		<result property="birth" column="birth"/>
		<result property="isLeave" column="is_leave"/>
		<result property="sIdx" column="s_idx"/>
		<result property="pIdx" column="p_idx"/>
	</resultMap>
	
	<!-- 로그인 -->
	<select id="login" resultMap="user">
		SELECT * FROM USERS WHERE USER_ID = #{userId} AND PASSWORD = #{password}
	</select>
	
	<!-- 아이디 찾기 -->
	<select id="findId" resultMap="user">
		SELECT * FROM USERS WHERE NAME = #{name} AND BIRTH = #{birth}
	</select>
	
	<!-- 비밀번호 찾기 -->
	<select id="findPwd" resultMap="user">
		SELECT * FROM USERS WHERE USER_ID = #{userId} AND NAME = #{name} AND PHONE = #{phone}
	</select>
	
	<!-- 비밀번호 변경 -->
	<update id="updatePwd"> 
		UPDATE USERS SET PASSWORD = #{password} WHERE USER_ID = #{userId}
	</update>
	
	<!-- 이메일 변경 -->
	<update id="updateEmail">
		UPDATE USERS SET EMAIL = #{email} WHERE USER_ID = #{userId}
	</update>
	
	<!-- 핸드폰 번호 변경 -->
	<update id="updatePhone">
		UPDATE USERS SET PHONE = #{phone} WHERE USER_ID = #{userId}
	</update>
</mapper>